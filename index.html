<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Absensi dengan Kalender Akademik</title>
  <style>
    body {
      background-image: url('backgroundbaru.jpg');
      background-size: cover;
      font-family: Arial, sans-serif;
      color: #000;
      text-align: center;
      margin: 0; padding: 0;
    }
    .login, .absensi {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 15px;# Menyusun ulang versi lengkap HTML berdasarkan instruksi user sebelumnya
# Fitur yang diminta:
# 1. Running text untuk info pertemuan
# 2. Logo bisa muter jika diklik
# 3. Logo berada di bawah running text info pertemuan
# 4. Tambahan running text untuk hari libur nasional di bawah login page

html_output = """
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <title>Absensi dengan Kalender Akademik</title>
  <style>
    body {
      background: linear-gradient(to right, #dfe9f3, #ffffff);
      font-family: Arial, sans-serif;
      color: #000;
      text-align: center;
      margin: 0; padding: 0;
    }
    .login {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 30px;
      margin: 40px auto;
      width: 90%;
      max-width: 800px;
      box-shadow: 0 0 10px #888;
    }
    img.logo {
      max-width: 120px;
      margin: 20px auto;
      display: block;
      cursor: pointer;
    }
    .rotate {
      animation: spin 2s linear;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .running-container {
      width: 100%;
      overflow: hidden;
      background: #dc3545;
      color: white;
      font-weight: bold;
      padding: 10px 0;
      box-sizing: border-box;
    }
    .running-text {
      display: inline-block;
      white-space: nowrap;
      padding-left: 100%;
      animation: runText 15s linear infinite;
    }
    @keyframes runText {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }
    #datetime {
      font-size: 18px;
      margin-bottom: 10px;
      font-weight: bold;
    }
    input[type="text"], input[type="password"] {
      padding: 8px;
      width: 60%;
      margin-bottom: 10px;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover {
      background-color: #0056b3;
    }
    #loginError {
      color: red;
      margin-top: 10px;
      height: 20px;
    }
  </style>
</head>
<body>
  <div class="login">
    <div id="datetime">Memuat waktu...</div>

    <!-- Running text info pertemuan -->
    <div class="running-container">
      <div class="running-text" id="infoPertemuanText">Memuat info pertemuan...</div>
    </div>

    <!-- Logo bisa diputar -->
    <img src="logobaru-removebg-preview.png" class="logo" id="logo" onclick="putarLogo()" alt="Logo" />

    <!-- Running text hari libur -->
    <div class="running-container" style="background:#28a745;">
      <div class="running-text" id="infoLiburText">Memuat info hari libur...</div>
    </div>

    <!-- Form Login -->
    <h2>ILMU HUKUM SEMESTER 2</h2>
    <input type="text" id="username" placeholder="Username" /><br />
    <input type="password" id="password" placeholder="Password" /><br />
    <button onclick="login()">Masuk</button>
    <p id="loginError"></p>
  </div>

  <script>
    const kalenderAkademik = {
      startDate: new Date('2025-03-17'),
      secondWeek: new Date('2025-04-07'),
      endDate: new Date('2025-07-21'),
      holidays: [
        { date: new Date('2025-04-18'), name: "Jumat Agung" },
        { date: new Date('2025-05-01'), name: "Hari Buruh Internasional" },
        { date: new Date('2025-05-29'), name: "Kenaikan Isa Almasih" },
        { date: new Date('2025-06-07'), name: "Hari Raya Idul Adha 1446 H" },
        { date: new Date('2025-03-22'), name: "Hari Raya Nyepi" },
        { date: new Date('2025-04-02'), name: "Isra Mi'raj Nabi Muhammad SAW" },
        { date: new Date('2025-05-12'), name: "Hari Raya Waisak" },
        { date: new Date('2025-06-01'), name: "Hari Lahir Pancasila" },
        { date: new Date('2025-08-17'), name: "Hari Kemerdekaan RI" }
      ]
    };

    function putarLogo() {
      const logo = document.getElementById('logo');
      logo.classList.add('rotate');
      setTimeout(() => logo.classList.remove('rotate'), 2000);
    }

    function hitungPertemuan() {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      if (today < kalenderAkademik.startDate) {
        return "Belum masuk periode perkuliahan (Mulai 17 Maret 2025)";
      }
      if (today > kalenderAkademik.endDate) {
        return "Perkuliahan telah berakhir (Sampai 21 Juli 2025)";
      }

      const isHoliday = kalenderAkademik.holidays.find(h => {
        const d = new Date(h.date);
        d.setHours(0, 0, 0, 0);
        return d.getTime() === today.getTime();
      });
      if (isHoliday) return `Hari Libur Nasional: ${isHoliday.name}`;

      let weekCount;
      if (today >= kalenderAkademik.startDate && today < kalenderAkademik.secondWeek) {
        weekCount = 1;
      } else {
        const diff = today - kalenderAkademik.secondWeek;
        weekCount = 2 + Math.floor(diff / (1000 * 60 * 60 * 24 * 7));
        weekCount = Math.min(weekCount, 16);
      }
      return `Pertemuan ke-${weekCount} (Minggu ke-${weekCount}) - Semester Genap 2024/2025`;
    }

    function updateInfo() {
      const now = new Date();
      const hari = ['Minggu','Senin','Selasa','Rabu','Kamis','Jumat','Sabtu'];
      const namaHari = hari[now.getDay()];
      const tanggal = now.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
      const jam = now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      document.getElementById('datetime').textContent = `${namaHari}, ${tanggal} | ${jam}`;

      // Update running teks pertemuan
      document.getElementById('infoPertemuanText').textContent = hitungPertemuan();

      // Update running teks hari libur
      const libur = kalenderAkademik.holidays.find(h => {
        const liburDate = new Date(h.date);
        liburDate.setHours(0, 0, 0, 0);
        return liburDate.getTime() === now.setHours(0, 0, 0, 0);
      });
      if (libur) {
        document.getElementById('infoLiburText').textContent = `Hari ini libur: ${libur.name}`;
      } else {
        document.getElementById('infoLiburText').textContent = "Tidak ada hari libur nasional hari ini.";
      }
    }

    setInterval(updateInfo, 1000);
    updateInfo();

    function login() {
      const user = document.getElementById('username').value.trim().toLowerCase();
      const pass = document.getElementById('password').value.trim();
      const loginError = document.getElementById('loginError');

      if (user === "admin" && pass === "admin") {
        loginError.textContent = "Login berhasil (simulasi).";
      } else {
        loginError.textContent = "Username atau password salah!";
      }
    }
  </script>
</body>
</html>
"""

# Simpan file HTML hasil modifikasi lengkap
with open("/mnt/data/absensi_runing_logo_libur_fix.html", "w", encoding="utf-8") as f:
    f.write(html_output)

"/mnt/data/absensi_runing_logo_libur_fix.html"

      padding: 20px;
      margin: 40px auto;
      width: 90%;
      max-width: 900px;
      box-shadow: 0 0 10px #888;
    }
    img.logo {
      max-width: 150px;
      margin-bottom: 20px;
      transition: transform 1s ease-in-out;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin: 20px 0;
      font-size: 14px;
    }
    caption {
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 18px;
    }
    th, td {
      border: 1px solid #333;
      padding: 5px;
      text-align: center;
      user-select: none;
    }
    th:first-child, td:first-child {
      text-align: left;
      padding-left: 10px;
    }
    button {
      padding: 8px 15px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      border: none;
      background-color: #007bff;
      color: white;
      margin-top: 15px;
    }
    button:hover {
      background-color: #0056b3;
    }
    #loginError {
      color: red;
      margin-top: 10px;
      height: 20px;
    }
    #datetime {
      margin-bottom: 10px;
font-size: 18px;
      margin-bottom: 20px;
      font-weight: bold;
    }
    .jadwal-hari-ini {
      margin: 20px 0;
      padding: 15px;
      background: rgba(0, 123, 255, 0.1);
      border-radius: 10px;
    }
    .jadwal-hari-ini h3 {
      margin-top: 0;
    }
    .matkul-item {
      margin: 5px 0;
      font-size: 16px;
      padding: 8px;
      border-radius: 5px;
    }
    .info-pertemuan {
      background-color: #dc3545;
      color: white;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      font-weight: bold;
      overflow: hidden;
      white-space: nowrap;
    }
    .running-text {
      display: inline-block;
      padding-left: 100%;
      animation: running-text 15s linear infinite;
    }
    .sedang-berjalan {
      background-color: #ffc107;
      color: black;
      font-weight: bold;
    }
    .jam-berjalan {
      color: #dc3545;
      font-weight: bold;
    }
    .welcome-message {
      font-size: 20px;
      margin-bottom: 15px;
      color: #333;
    }
    .dosen-info {
      font-style: italic;
      margin-bottom: 15px;
    }
    .role-info {
      font-weight: bold;
      color: #28a745;
      margin-bottom: 10px;
    }
    .greeting {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
      color: #000000;
    }
    .hari-raya {
      background-color: #17a2b8;
      color: white;
      padding: 10px;
      border-radius: 8px;
      margin: 10px 0;
      font-weight: bold;
      animation: pulse 2s infinite;
    }
    @keyframes running-text {
      0% { transform: translateX(0); }

    .running-container {
      width: 100%;
      overflow: hidden;
      position: relative;
      height: 30px;
      margin-bottom: 10px;
    }

      100% { transform: translateX(-100%); }
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }
    @keyframes rotate {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>

<div class="login" id="loginBox">
  <img class="logo" src="logobaru-removebg-preview.png" alt="Logo" id="logo" />
  <h2>ILMU HUKUM SEMESTER 2</h2>
  
  <div id="datetime"></div>
<div id="infoPertemuan" class="info-pertemuan">
  <div class="running-container">
    <div class="running-text" id="runningTextContent"></div>
  </div>
</div>
  </div>
</div>
  <div id="hariRayaInfo" class="hari-raya" style="display:none;"></div>
  
  <div class="jadwal-hari-ini" id="jadwalHariIni">
    <h3>Jadwal Kuliah Hari Ini</h3>
    <div id="listMatkul"></div>
  </div>
  
  <input type="text" id="username" placeholder="Username" /><br /><br />
  <input type="password" id="password" placeholder="Password" /><br /><br />
  <button onclick="login()">Masuk</button>
  <p id="loginError"></p>
  
  <!-- Informasi login dosen -->
  <div style="margin-top: 20px; text-align: left; font-size: 14px; color: #555;">
    <p><strong>Contoh login dosen:</strong></p>
    <ul style="list-style-type: none; padding-left: 10px;">
      <li>Username: <strong>pak agan</strong> Password: <strong>123</strong> (Pak Agan Sutanto)</li>
      <li>Username: <strong>bu elvina</strong> Password: <strong>123</strong> (Bu Elvina Melinda)</li>
      <li>Username: <strong>pak muarifudin</strong> Password: <strong>123</strong> (Pak Muarifudin)</li>
      <li>Username: <strong>bu dina</strong> Password: <strong>123</strong> (Bu Dina Ulaya)</li>
      <li>Username: <strong>bu kusroh</strong> Password: <strong>123</strong> (Bu Kusroh Lailiyah)</li>
    </ul>
  </div>
</div>

<div class="absensi" id="absensiBox" style="display:none;">
  <div id="greetingMessage" class="greeting"></div>
  <div id="welcomeMessage" class="welcome-message"></div>
  <div id="roleInfo" class="role-info"></div>
  <div id="dosenInfo" class="dosen-info"></div>
  <div id="datetimeAbsensi"></div>
  <div id="infoPertemuanAbsensi" class="info-pertemuan">
  <div class="running-container">
    <div class="running-text" id="runningTextContentAbsensi"></div>
  </div>
</div>
  <div id="hariRayaInfoAbsensi" class="hari-raya" style="display:none;"></div>
  <h2>Data Absensi</h2>
  <div id="tables"></div>
  <button onclick="logout()">Logout</button>
</div>

<script>
  // Data pengguna
  const users = {
    // User admin
    admin: { password: 'admin1', role: 'admin', name: 'Administrator', title: '' },
    
    // User mahasiswa
    david: { password: 'david', role: 'student', name: 'David', title: '' },
    abdu: { password: 'abdu', role: 'student', name: 'Abdu', title: '' },
    angga: { password: 'angga', role: 'student', name: 'Angga', title: '' },
    
    // User dosen
    'pak agan': { 
      password: '123', 
      role: 'lecturer', 
      name: 'Agan Sutanto',
      title: 'S.H., M.H.',
      matkul: 'Hukum Perdata',
      greeting: 'Pak'
    },
    'bu elvina': { 
      password: '123', 
      role: 'lecturer', 
      name: 'Elvina Melinda',
      title: 'S.H., M.H.',
      matkul: ['Hukum Pidana', 'Pendidikan Kewarganegaraan', 'Sosiologi dan Ilmu Budaya Dasar'],
      greeting: 'Bu'
    },
    'pak muarifudin': { 
      password: '123', 
      role: 'lecturer', 
      name: 'Muarifudin',
      title: 'S.E., M.M.',
      matkul: 'Pendidikan Agama Islam',
      greeting: 'Pak'
    },
    'bu dina': { 
      password: '123', 
      role: 'lecturer', 
      name: 'Dina Ulaya Aziizah',
      title: 'S.E., M.M.',
      matkul: 'Bahasa Indonesia',
      greeting: 'Bu'
    },
    'bu kusroh': { 
      password: '123', 
      role: 'lecturer', 
      name: 'Kusroh Lailiyah',
      title: 'S.H., M.H.',
      matkul: 'Hukum Tata Negara',
      greeting: 'Bu'
    }
  };

  // Data dosen untuk setiap mata kuliah
  const dosenMatkul = {
    "Pendidikan Kewarganegaraan": "Elvina Melinda, S.H., M.H.",
    "Pendidikan Agama Islam": "Muarifudin, S.E., M.M.",
    "Hukum Pidana": "Elvina Melinda, S.H., M.H.",
    "Sosiologi dan Ilmu Budaya Dasar": "Elvina Melinda, S.H., M.H.",
    "Bahasa Indonesia": "Dina Ulaya Aziizah, S.E., M.M.",
    "Hukum Perdata": "Agan Sutanto, S.H., M.H.",
    "Hukum Tata Negara": "Kusroh Lailiyah, S.H., M.H."
  };

  // KALENDER AKADEMIK 2025
  const kalenderAkademik = {
    startDate: new Date('2025-03-17'), // Minggu pertama 17 Maret 2025
    secondWeek: new Date('2025-04-07'), // Minggu kedua 7 April 2025
    endDate: new Date('2025-07-21'),    // Minggu ke-16 21 Juli 2025
    holidays: [
      { date: new Date('2025-04-18'), name: "Jumat Agung" },
      { date: new Date('2025-05-01'), name: "Hari Buruh Internasional" },
      { date: new Date('2025-05-29'), name: "Kenaikan Isa Almasih" },
      { date: new Date('2025-06-07'), name: "Hari Raya Idul Adha 1446 H" },
      { date: new Date('2025-03-22'), name: "Hari Raya Nyepi" },
      { date: new Date('2025-04-02'), name: "Isra Mi'raj Nabi Muhammad SAW" },
      { date: new Date('2025-05-12'), name: "Hari Raya Waisak" },
      { date: new Date('2025-06-01'), name: "Hari Lahir Pancasila" },
      { date: new Date('2025-08-17'), name: "Hari Kemerdekaan RI" }
    ]
  };

  // Jadwal mata kuliah berdasarkan hari (0=Minggu, 1=Senin, ..., 6=Sabtu) beserta jam
  const jadwalKuliah = {
    1: [ // Senin
      { nama: "Pendidikan Kewarganegaraan", jam: "13:00 - 14:00" },
      { nama: "Pendidikan Agama Islam", jam: "14:00 - 15:00" }
    ],
    2: [ // Selasa
      { nama: "Hukum Pidana", jam: "13:00 - 14:00" },
      { nama: "Sosiologi dan Ilmu Budaya Dasar", jam: "14:00 - 15:00" }
    ],
    3: [ // Rabu
      { nama: "Bahasa Indonesia", jam: "08:00 - 10:00" },
      { nama: "Hukum Perdata", jam: "10:00 - 12:00" }
    ],
    4: [ // Kamis
      { nama: "Hukum Tata Negara", jam: "13:30 - 15:30" }
    ],
    5: [], // Jumat (tidak ada kelas)
    6: [], // Sabtu (tidak ada kelas)
    0: []  // Minggu (tidak ada kelas)
  };

  const semuaMataKuliah = [
    "Pendidikan Kewarganegaraan",
    "Pendidikan Agama Islam",
    "Hukum Pidana",
    "Sosiologi dan Ilmu Budaya Dasar",
    "Bahasa Indonesia",
    "Hukum Perdata",
    "Hukum Tata Negara"
  ];

  const dataAbsensi = {
    david: {
      "Pendidikan Kewarganegaraan": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Pendidikan Agama Islam": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Hukum Pidana": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Sosiologi dan Ilmu Budaya Dasar": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Bahasa Indonesia": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Hukum Perdata": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Hukum Tata Negara": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] }
    },
    angga: {
      "Pendidikan Kewarganegaraan": { hadir: [1,2,3,5,7,8], tidakHadir: [4,6] },
      "Pendidikan Agama Islam": { hadir: [2,3,4,6,8], tidakHadir: [1,5,7] },
      "Hukum Pidana": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Sosiologi dan Ilmu Budaya Dasar": { hadir: [1,2,4,5,6,7,8], tidakHadir: [3] },
      "Bahasa Indonesia": { hadir: [1,2,3,4,6,7,8], tidakHadir: [5] },
      "Hukum Perdata": { hadir: [2,3,4,5,6,7,8], tidakHadir: [1] },
      "Hukum Tata Negara": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] }
    },
    abdu: {
      "Pendidikan Kewarganegaraan": { hadir: [1,2,3,5,7,8], tidakHadir: [4,6] },
      "Pendidikan Agama Islam": { hadir: [2,4,5,6,7,8], tidakHadir: [1,3] },
      "Hukum Pidana": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Sosiologi dan Ilmu Budaya Dasar": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] },
      "Bahasa Indonesia": { hadir: [1,2,3,5,6,7,8], tidakHadir: [4] },
      "Hukum Perdata": { hadir: [2,3,4,5,6,7,8], tidakHadir: [1] },
      "Hukum Tata Negara": { hadir: [1,2,3,4,5,6,7,8], tidakHadir: [] }
    }
  };

  // Fungsi untuk memeriksa apakah waktu saat ini berada dalam jam kuliah
  function isWaktuKuliah(jamKuliah) {
    const now = new Date();
    const [startTime, endTime] = jamKuliah.split(' - ');
    
    const [startHour, startMinute] = startTime.split(':').map(Number);
    const [endHour, endMinute] = endTime.split(':').map(Number);
    
    const startDate = new Date();
    startDate.setHours(startHour, startMinute, 0, 0);
    
    const endDate = new Date();
    endDate.setHours(endHour, endMinute, 0, 0);
    
    return now >= startDate && now <= endDate;
  }

  // Fungsi untuk memperbarui tanggal dan waktu
  function updateDateTime() {
    const now = new Date();
    const hari = ['Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jumat', 'Sabtu'];
    const namaHari = hari[now.getDay()];
    const tanggal = now.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
    const jam = now.toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    
    const dateTimeStr = `${namaHari}, ${tanggal} | ${jam}`;
    document.getElementById('datetime').textContent = dateTimeStr;
    
    const pertemuanInfo = hitungPertemuan();
    
    // Format running text for meeting info
    const pertemuanElement = document.getElementById('infoPertemuan');
    pertemuanElement.innerHTML = '';
    const runningTextEl = document.getElementById('runningTextContent');
if (runningTextEl) runningTextEl.textContent = pertemuanInfo.status;
    
    // Check for holidays/special days
    checkHariRaya(now);
    
    if(document.getElementById('absensiBox').style.display !== 'none') {
      document.getElementById('datetimeAbsensi').textContent = dateTimeStr;
      
      const pertemuanAbsensiElement = document.getElementById('infoPertemuanAbsensi');
      pertemuanAbsensiElement.innerHTML = '';
      const runningTextAbsensiEl = document.getElementById('runningTextContentAbsensi');
if (runningTextAbsensiEl) runningTextAbsensiEl.textContent = pertemuanInfo.status;
    }
    
    return pertemuanInfo.pertemuan;
  }

  // Fungsi untuk mengecek hari raya/spesial
  function checkHariRaya(date) {
    date.setHours(0, 0, 0, 0);
    const hariRaya = kalenderAkademik.holidays.find(holiday => {
      const holidayDate = new Date(holiday.date);
      holidayDate.setHours(0, 0, 0, 0);
      return holidayDate.getTime() === date.getTime();
    });
    
    const hariRayaInfo = document.getElementById('hariRayaInfo');
    const hariRayaInfoAbsensi = document.getElementById('hariRayaInfoAbsensi');
    
    if (hariRaya) {
      hariRayaInfo.style.display = 'block';
      hariRayaInfo.textContent = `Hari Ini: ${hariRaya.name}`;
      
      hariRayaInfoAbsensi.style.display = 'block';
      hariRayaInfoAbsensi.textContent = `Hari Ini: ${hariRaya.name}`;
    } else {
      hariRayaInfo.style.display = 'none';
      hariRayaInfoAbsensi.style.display = 'none';
    }
  }

  // Fungsi untuk menampilkan jadwal hari ini
  function tampilkanJadwalHariIni() {
    const hariIni = new Date().getDay();
    const matkulHariIni = jadwalKuliah[hariIni];
    const listMatkul = document.getElementById('listMatkul');
    
    listMatkul.innerHTML = '';
    
    if(matkulHariIni.length === 0) {
      listMatkul.innerHTML = '<p>Tidak ada jadwal kuliah hari ini</p>';
    } else {
      matkulHariIni.forEach(matkul => {
        const div = document.createElement('div');
        div.className = 'matkul-item';
        
        const isBerjalan = isWaktuKuliah(matkul.jam);
        
        const jamParts = matkul.jam.split(' ');
        const jamHTML = isBerjalan 
          ? `<span class="jam-berjalan">${jamParts[0]}</span> ${jamParts[1]} <span class="jam-berjalan">${jamParts[2]}</span>`
          : matkul.jam;
        
        div.innerHTML = `
          <strong>${matkul.nama}</strong> (${jamHTML})<br>
          <small>${dosenMatkul[matkul.nama]}</small>
        `;
        
        if (isBerjalan) {
          div.classList.add('sedang-berjalan');
        }
        
        listMatkul.appendChild(div);
      });
    }
  }

  // Fungsi untuk memutar logo
  function rotateLogo() {
    const logo = document.getElementById('logo');
    logo.style.animation = 'rotate 2s linear';
    
    setTimeout(() => {
      logo.style.animation = '';
    }, 2000);
  }

  // Fungsi Login
  function login() {
    const user = document.getElementById('username').value.trim();
    const pass = document.getElementById('password').value.trim();
    const loginError = document.getElementById('loginError');

    if(users[user.toLowerCase()] && users[user.toLowerCase()].password === pass) {
      loginError.textContent = '';
      showAbsensi(user.toLowerCase());
    } else {
      loginError.textContent = 'Username atau password salah!';
    }
  }

  function logout() {
    document.getElementById('loginBox').style.display = 'block';
    document.getElementById('absensiBox').style.display = 'none';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
  }

  function showAbsensi(user) {
    const currentWeek = updateDateTime();
    document.getElementById('loginBox').style.display = 'none';
    document.getElementById('absensiBox').style.display = 'block';

    const container = document.getElementById('tables');
    container.innerHTML = '';

    const userData = users[user];
    const userRole = userData.role;
    const userName = userData.name;
    const userTitle = userData.title || '';
    const userGreeting = userData.greeting || '';

    // Set welcome message based on role
    document.getElementById('greetingMessage').textContent = `Selamat datang, ${userGreeting} ${userName} ${userTitle}`;
    document.getElementById('welcomeMessage').style.display = 'none';
    document.getElementById('roleInfo').textContent = `Anda login sebagai: ${userRole === 'admin' ? 'Administrator' : userRole === 'lecturer' ? 'Dosen' : 'Mahasiswa'}`;
    
    if (userRole === 'lecturer') {
      document.getElementById('dosenInfo').textContent = `Mata kuliah yang diampu: ${Array.isArray(userData.matkul) ? userData.matkul.join(', ') : userData.matkul}`;
    } else {
      document.getElementById('dosenInfo').textContent = '';
    }

    if (userRole === 'admin') {
      // Tampilan untuk admin - semua data
      semuaMataKuliah.forEach(matkul => {
        const table = document.createElement('table');
        const caption = document.createElement('caption');
        caption.textContent = `${matkul} (Pertemuan ke-${currentWeek})`;
        table.appendChild(caption);

        // Info dosen
        const dosenRow = table.insertRow();
        const dosenCell = dosenRow.insertCell();
        dosenCell.colSpan = 17;
        dosenCell.textContent = `Dosen: ${dosenMatkul[matkul]}`;
        dosenCell.style.textAlign = 'left';
        dosenCell.style.fontStyle = 'italic';

        // Header tabel
        const header = table.insertRow();
        header.insertCell().textContent = 'Nama Mahasiswa';
        for(let p=1; p<=16; p++){
          header.insertCell().textContent = p;
        }

        Object.keys(dataAbsensi).forEach(nama => {
          const row = table.insertRow();
          row.insertCell().textContent = nama.charAt(0).toUpperCase() + nama.slice(1);

          const hadirArr = dataAbsensi[nama][matkul]?.hadir || [];
          const tidakHadirArr = dataAbsensi[nama][matkul]?.tidakHadir || [];

          for(let p=1; p<=16; p++){
            const cell = row.insertCell();
            if(hadirArr.includes(p)){
              cell.textContent = "✔️";
            } else if(tidakHadirArr.includes(p)){
              cell.textContent = "❌";
            } else {
              cell.textContent = "";
            }
          }
        });

        container.appendChild(table);
      });
    } else if (userRole === 'lecturer') {
      // Tampilan untuk dosen - hanya matkul yang diampu
      const matkulDosen = Array.isArray(userData.matkul) ? userData.matkul : [userData.matkul];
      
      matkulDosen.forEach(matkul => {
        const table = document.createElement('table');
        const caption = document.createElement('caption');
        caption.textContent = `${matkul} (Pertemuan ke-${currentWeek})`;
        table.appendChild(caption);

        // Header tabel
        const header = table.insertRow();
        header.insertCell().textContent = 'Nama Mahasiswa';
        for(let p=1; p<=16; p++){
          header.insertCell().textContent = p;
        }

        Object.keys(dataAbsensi).forEach(nama => {
          const row = table.insertRow();
          row.insertCell().textContent = nama.charAt(0).toUpperCase() + nama.slice(1);

          const hadirArr = dataAbsensi[nama][matkul]?.hadir || [];
          const tidakHadirArr = dataAbsensi[nama][matkul]?.tidakHadir || [];

          for(let p=1; p<=16; p++){
            const cell = row.insertCell();
            if(hadirArr.includes(p)){
              cell.textContent = "✔️";
            } else if(tidakHadirArr.includes(p)){
              cell.textContent = "❌";
            } else {
              cell.textContent = "";
            }
          }
        });

        container.appendChild(table);
      });
    } else {
      // Tampilan untuk mahasiswa - hanya data dirinya sendiri
      const hariIni = new Date().getDay();
      const matkulHariIni = jadwalKuliah[hariIni].map(m => m.nama);
      
      const mataKuliahYangDitampilkan = matkulHariIni.length > 0 ? matkulHariIni : semuaMataKuliah;

      if (matkulHariIni.length === 0) {
        const info = document.createElement('p');
        info.textContent = "Hari ini tidak ada jadwal kuliah. Menampilkan semua mata kuliah.";
        container.appendChild(info);
      }

      mataKuliahYangDitampilkan.forEach(matkul => {
        const table = document.createElement('table');
        const caption = document.createElement('caption');
        caption.textContent = `${matkul} (Pertemuan ke-${currentWeek})`;
        table.appendChild(caption);

        // Info dosen
        const dosenRow = table.insertRow();
        const dosenCell = dosenRow.insertCell();
        dosenCell.colSpan = 17;
        dosenCell.textContent = `Dosen: ${dosenMatkul[matkul]}`;
        dosenCell.style.textAlign = 'left';
        dosenCell.style.fontStyle = 'italic';

        // Header tabel
        const header = table.insertRow();
        header.insertCell().textContent = 'Pertemuan';
        for(let p=1; p<=16; p++){
          header.insertCell().textContent = p;
        }

        const row = table.insertRow();
        row.insertCell().textContent = 'Kehadiran';

        const hadirArr = dataAbsensi[user][matkul]?.hadir || [];
        const tidakHadirArr = dataAbsensi[user][matkul]?.tidakHadir || [];

        for(let p=1; p<=16; p++){
          const cell = row.insertCell();
          if(hadirArr.includes(p)){
            cell.textContent = "✔️";
          } else if(tidakHadirArr.includes(p)){
            cell.textContent = "❌";
          } else {
            cell.textContent = "";
          }
        }

        container.appendChild(table);
      });
    }
  }

  // Fungsi untuk menghitung pertemuan
  function hitungPertemuan() {
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    if (today < kalenderAkademik.startDate) {
      return { 
        pertemuan: 0, 
        status: "Belum masuk periode perkuliahan (Mulai 17 Maret 2025)" 
      };
    }
    
    if (today > kalenderAkademik.endDate) {
      return { 
        pertemuan: 17, 
        status: "Perkuliahan telah berakhir (Sampai 21 Juli 2025)" 
      };
    }
    
    const isHoliday = kalenderAkademik.holidays.some(holiday => {
      const holidayDate = new Date(holiday.date);
      holidayDate.setHours(0, 0, 0, 0);
      return holidayDate.getTime() === today.getTime();
    });
    
    if (isHoliday) {
      const holiday = kalenderAkademik.holidays.find(h => {
        const holidayDate = new Date(h.date);
        holidayDate.setHours(0, 0, 0, 0);
        return holidayDate.getTime() === today.getTime();
      });
      return { 
        pertemuan: -1, 
        status: `Hari Libur Nasional: ${holiday.name}` 
      };
    }
    
    let weekCount;
    
    if (today >= kalenderAkademik.startDate && today < kalenderAkademik.secondWeek) {
      weekCount = 1;
    } else {
      const diffTime = today - kalenderAkademik.secondWeek;
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      weekCount = 2 + Math.floor(diffDays / 7);
      weekCount = Math.min(weekCount, 16);
    }
    
    return { 
      pertemuan: weekCount,
      status: `Pertemuan ke-${weekCount} (Minggu ke-${weekCount}) - Semester Genap 2024/2025 - Fakultas Hukum - Universitas Bina Bangsa`
    };
  }

  // Inisialisasi
  setInterval(updateDateTime, 1000);
  updateDateTime();
  tampilkanJadwalHariIni();
  setInterval(tampilkanJadwalHariIni, 60000);
  
  // Rotate logo every 10 seconds
  setInterval(rotateLogo, 10000);
</script>

</body>
</html>
